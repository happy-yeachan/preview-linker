<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Preview Linker</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 600px;
      margin: 2rem auto;
      padding: 1rem;
    }
    input, textarea {
      width: 100%;
      margin-bottom: 1rem;
      padding: 0.5rem;
      font-size: 1rem;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }
    #preview {
      margin-top: 2rem;
      border: 1px solid #ddd;
      padding: 1rem;
      background: #fafafa;
    }
  </style>
</head>
<body>
    <h1>ğŸ”— Preview Link Generator</h1>
    <p>ë¯¸ë¦¬ë³´ê¸° ë§í¬ë¥¼ ìƒì„±í•˜ê³  ë°”ë¡œ ë°°í¬í•˜ì„¸ìš”!</p>

    <label>ì œëª©</label>
    <input type="text" id="title" placeholder="ì˜ˆ: ëª¨ì„ìƒì„±2" />

    <label>ì„¤ëª…</label>
    <textarea id="desc" placeholder="ì˜ˆ: dannyì˜ ëª¨ì„ì— ì°¸ì—¬í•˜ì„¸ìš”!"></textarea>

    <label>ì¸ë„¤ì¼ ì´ë¯¸ì§€ URL</label>
    <input type="text" id="image" placeholder="https://..." />

    <label>ë¦¬ë””ë ‰ì…˜í•  ë§í¬(URL)</label>
    <input type="text" id="url" placeholder="https://naver.com" />

    <button onclick="generateLink()">ë¯¸ë¦¬ë³´ê¸° ë§í¬ ìƒì„±</button>
    <div id="preview"></div>

    <script>
        function escape(str) {
        return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, '&quot;');
        }

        function generateLink() {
        const titleInput = document.getElementById('title');
        const descInput = document.getElementById('desc');
        const imageInput = document.getElementById('image');
        const urlInput = document.getElementById('url');

        if (!titleInput || !descInput || !imageInput || !urlInput) {
            alert('í•„ìˆ˜ ì…ë ¥ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
            return;
        }

        const title = escape(titleInput.value.trim());
        const desc = escape(descInput.value.trim());
        const image = escape(imageInput.value.trim());
        const url = escape(urlInput.value.trim());

        if (!title || !desc || !image || !url) {
            alert('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        const filename = 'preview-' + Math.random().toString(36).substring(2, 8);

        const html = `<!DOCTYPE html>
                    <html lang="ko">
                    <head>
                    <meta charset="UTF-8">
                    <meta property="og:title" content="${title}" />
                    <meta property="og:description" content="${desc}" />
                    <meta property="og:image" content="${image}" />
                    <meta property="og:url" content="${url}" />
                    <meta property="og:type" content="website" />
                    <meta http-equiv="refresh" content="0; url=${url}" />
                    <title>${title}</title>
                    </head>
                    <body>
                    <script>location.href="${url}"</script>
                    </body>
                    </html>`;

        document.getElementById('preview').innerHTML = `âœ… <strong>${filename}.html</strong> íŒŒì¼ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
            ğŸ‘‰ ì•„ë˜ ì½”ë“œë¥¼ ë³µì‚¬í•´ <code>/preview/${filename}.html</code>ë¡œ ì €ì¥í•˜ê±°ë‚˜ GitHub Pagesì— ë°°í¬í•˜ì„¸ìš”.<br><br>
            <textarea style="width:100%; height:200px">${html}</textarea>
            <p><strong>ê³µìœ  ë§í¬:</strong><br>
            <code>https://happy-yeachan.github.io/preview-linker/preview/${filename}.html</code></p>`;
        }
    </script>
</body>
</html>